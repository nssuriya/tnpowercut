const HtmlTableToJson = require('html-table-to-json');
 
// var request = require("request");

// var options = { method: 'POST',
//   url: 'http://www.tnebltd.gov.in:8080/outages/viewshutdown.xhtml;jsessionid=46A78B9974AE282D034B104715BA3366',
//   headers: 
//    { 'postman-token': '53ce6910-7591-dcea-b18e-63a589570743',
//      'cache-control': 'no-cache',
//      'content-type': 'application/x-www-form-urlencoded' },
//   form: {} };

// request(options, function (error, response, body) {
//   if (error) throw new Error(error);

// //  console.log(body);

// });

const jsonTables = new HtmlTableToJson(`
      <partial-response id="j_id1"><changes><update id="j_idt8:dataTable"><![CDATA[<div id="j_idt8:dataTable" class="ui-datatable ui-widget tableStyle ui-datatable-resizable" style="width:1040px"><div id="j_idt8:dataTable_paginator_top" class="ui-paginator ui-paginator-top ui-widget-header ui-corner-top"><span class="ui-paginator-current">(2 of 2)</span> <span class="ui-paginator-first ui-state-default ui-corner-all"><span class="ui-icon ui-icon-seek-first">p</span></span><span class="ui-paginator-prev ui-state-default ui-corner-all"><span class="ui-icon ui-icon-seek-prev">p</span></span><span class="ui-paginator-pages"><span class="ui-paginator-page ui-state-default ui-corner-all">1</span><span class="ui-paginator-page ui-state-default ui-state-active ui-corner-all">2</span></span><span class="ui-paginator-next ui-state-default ui-corner-all ui-state-disabled"><span class="ui-icon ui-icon-seek-next">p</span></span>                                           <span class="ui-paginator-last ui-state-default ui-corner-all ui-state-disabled"><span class="ui-icon ui-icon-seek-end">p</span></span><select class="ui-paginator-rpp-options ui-widget ui-state-default ui-corner-left" value="10"><option value="5">5</option><option value="10" selected="selected">10</option><option value="15">15</option></select></div><div class="ui-datatable-tablewrapper"><table role="grid"><thead id="j_idt8:dataTable_head"><tr role="row"><th id="j_idt8:dataTable:j_idt61" class="ui-state-default ui-resizable-column" role="columnheader" style="width:20px"><span>S.no</span></th><th id="j_idt8:dataTable:j_idt63" class="ui-state-default ui-resizable-column wrap" role="columnheader" style="width:88px"><span>Outage date</span></th><th id="j_idt8:dataTable:j_idt66" class="ui-state-default ui-resizable-column wrap" role="columnheader" style="width:110px"><span>Town</span></th><th id="j_idt8:dataTable:j_idt68" class="ui-state-default ui-resizable-column wrap" role="columnheader" style="width:185px"><span>Substation</span></th><th id="j_idt8:dataTable:j_idt70" class="ui-state-default ui-resizable-column wrap" role="columnheader" style="width:95px"><span>Feeder</span></th><th id="j_idt8:dataTable:j_idt72" class="ui-state-default ui-resizable-column wrap" role="columnheader" style="width:205px"><span>Area affected</span></th><th id="j_idt8:dataTable:j_idt74" class="ui-state-default ui-resizable-column wrap" role="columnheader" style="width:80px"><span>From</span></th><th id="j_idt8:dataTable:j_idt77" class="ui-state-default ui-resizable-column wrap" role="columnheader" style="width:80px"><span>To</span></th></tr></thead><tfoot></tfoot><tbody id="j_idt8:dataTable_data" class="ui-datatable-data ui-widget-content"><tr data-ri="10" class="ui-widget-content ui-datatable-even" role="row"><td role="gridcell">11</td><td role="gridcell" class="wrap"> 07-09-2019</td><td role="gridcell" class="wrap">Dharmapuri</td><td role="gridcell" class="wrap">VELLICHANDAI 110/33-11</td><td role="gridcell" class="wrap">VELLICHANDAI 110/33-11</td><td role="gridcell" class="wrap">All area</td><td role="gridcell" class="wrap">  09:00</td><td role="gridcell" class="wrap"> 17:00</td></tr><tr data-ri="11" class="ui-widget-content ui-datatable-odd" role="row"><td role="gridcell">12</td><td role="gridcell" class="wrap"> 07-09-2019</td><td role="gridcell" class="wrap">Dharmapuri</td><td role="gridcell" class="wrap">PENNAGARAM 110/33/11</td><td role="gridcell" class="wrap">PENNAGARAM 110/33/11</td><td role="gridcell" class="wrap">All area</td><td role="gridcell" class="wrap">  09:00</td><td role="gridcell" class="wrap"> 17:00</td></tr><tr data-ri="12" class="ui-widget-content ui-datatable-even" role="row"><td role="gridcell">13</td><td role="gridcell" class="wrap"> 07-09-2019</td><td role="gridcell" class="wrap">Dharmapuri</td><td role="gridcell" class="wrap">VELLICHANDAI 110/33-11</td><td role="gridcell" class="wrap">Palacode town</td><td role="gridcell" class="wrap">All area</td><td role="gridcell" class="wrap">  09:00</td><td role="gridcell" class="wrap"> 17:00</td></tr><tr data-ri="13" class="ui-widget-content ui-datatable-odd" role="row"><td role="gridcell">14</td><td role="gridcell" class="wrap"> 04-09-2019</td><td role="gridcell" class="wrap">Dharmapuri</td><td role="gridcell" class="wrap">MAMBATTY 110/33 KV SS</td><td role="gridcell" class="wrap">MAMBATTY 110/33 KV SS</td><td role="gridcell" class="wrap">All area</td><td role="gridcell" class="wrap">  09:00</td><td role="gridcell" class="wrap"> 17:00</td></tr><tr data-ri="14" class="ui-widget-content ui-datatable-even" role="row"><td role="gridcell">15</td><td role="gridcell" class="wrap"> 04-09-2019</td><td role="gridcell" class="wrap">DHARMAPURI</td><td role="gridcell" class="wrap">MAMBATTY 110/33 KV SS</td><td role="gridcell" class="wrap">MAMBATTY 110/33 KV SS</td><td role="gridcell" class="wrap">ALL</td><td role="gridcell" class="wrap">  09:00</td><td role="gridcell" class="wrap"> 05:00</td></tr><tr data-ri="15" class="ui-widget-content ui-datatable-odd" role="row"><td role="gridcell">16</td><td role="gridcell" class="wrap"> 31-08-2019</td><td role="gridcell" class="wrap">KARIMANGALAM</td><td role="gridcell" class="wrap">KARIMANGALAM 110/33-11 KV SS</td><td role="gridcell" class="wrap">All feeders</td><td role="gridcell" class="wrap">All Areas</td><td role="gridcell" class="wrap">  09:00</td><td role="gridcell" class="wrap"> 17:00</td></tr><tr data-ri="16" class="ui-widget-content ui-datatable-even" role="row"><td role="gridcell">17</td><td role="gridcell" class="wrap"> 29-08-2019</td><td role="gridcell" class="wrap">Dharmapuri</td><td role="gridcell" class="wrap">Sogathur  110/11 KV SS</td><td role="gridcell" class="wrap">All feeders</td><td role="gridcell" class="wrap">All Areas</td><td role="gridcell" class="wrap">  09:00</td><td role="gridcell" class="wrap"> 17:00</td></tr></tbody></table></div><div id="j_idt8:dataTable_paginator_bottom" class="ui-paginator ui-paginator-bottom ui-widget-header ui-corner-bottom"><span class="ui-paginator-current">(2 of 2)</span> <span class="ui-paginator-first ui-state-default ui-corner-all"><span class="ui-icon ui-icon-seek-first">p</span></span><span class="ui-paginator-prev ui-state-default ui-corner-all"><span class="ui-icon ui-icon-seek-prev">p</span></span><span class="ui-paginator-pages"><span class="ui-paginator-page ui-state-default ui-corner-all">1</span><span class="ui-paginator-page ui-state-default ui-state-active ui-corner-all">2</span></span><span class="ui-paginator-next ui-state-default ui-corner-all ui-state-disabled"><span class="ui-icon ui-icon-seek-next">p</span></span>                                           <span class="ui-paginator-last ui-state-default ui-corner-all ui-state-disabled"><span class="ui-icon ui-icon-seek-end">p</span></span><select class="ui-paginator-rpp-options ui-widget ui-state-default ui-corner-left" value="10"><option value="5">5</option><option value="10" selected="selected">10</option><option value="15">15</option></select></div></div><script id="j_idt8:dataTable_s" type="text/javascript">$(function(){PrimeFaces.cw('DataTable','widget_j_idt8_dataTable',{id:'j_idt8:dataTable',paginator:{id:['j_idt8:dataTable_paginator_top','j_idt8:dataTable_paginator_bottom'],rows:10,rowCount:17,page:1,currentPageTemplate:'({currentPage} of {totalPages})'},resizableColumns:true});});</script>]]></update><update id="j_id1:javax.faces.ViewState:0"><![CDATA[-8660943004232411817:1815675392267029359]]></update></changes></partial-response>
    `);

console.log(jsonTables.results[0]);
/* => [[
 *      {Animal: 'Unicorn', Color: 'Pink', Name: 'Billy'},
 *      {Animal: 'Walrus', Color: 'Orange', Name: 'Sue'}
 *    ]]
 */
 
